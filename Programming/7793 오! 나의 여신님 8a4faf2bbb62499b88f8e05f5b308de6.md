# 7793. 오! 나의 여신님

Created time: May 14, 2024 5:11 PM
Last edited time: May 14, 2024 5:56 PM

- 문제 이해
    
    "악마의 손아귀" 스킬은 매 초마다 상하좌우 인접해있는 영역들을 부식시키며 확장되어 간다.
    
    → 이 점이 독특하다. 
    
    python으로는 풀 수 없는 문제인지 아예 제출이 안되게 되어 있다 ;; 
    
- Trial
    - 악마의 손아귀 스킬은 적용이 안된 상태 ;;
        
        ```python
        import sys
        sys.stdin = open('temp_input/input.txt', 'r')
        
        def game_on(x, y, dist):
            # base case
            if visited[x][y]:
                return float('inf')
            if matrix[x][y] == '*' or matrix[x][y] == 'X':
                return float('inf')
            if matrix[x][y] == 'D':
                visited[x][y] = 1
                return dist
        
            # mark as visited
            visited[x][y] = 1
            cur_min = float('inf')
            for d in directions:
                new_x, new_y = x + d[0], y + d[1]
                if 0 <= new_x < N and 0 <= new_y < M:
                    if not visited[new_x][new_y] and matrix[new_x][new_y] == '.':
                        temp = game_on(new_x, new_y, dist+1)
                        cur_min = min(cur_min, temp)
            return cur_min
        
        T = int(input())
        for t in range(1, T+1):
            N, M = map(int, input().split())
            matrix = []
            for i in range(N):
                cur_row = input()
                if 'S' in cur_row:
                    start = i
                matrix.append(cur_row)
        
            for j in range(M):
                if matrix[start][j] == 'S':
                    break
        
            visited = [[0] * M for _ in range(N)]
            directions = [(0, 1), (1, 0), (-1, 0), (0, -1)]
            ans = game_on(start, j, 0)
        
            if ans == float('inf'):
                print(f'#{t} {"GAME OVER"}')
            else:
                print(f'#{t} {ans}')
        ```
        
- scratch
    - 두번 bfs 돌리면 될 것 같다?
- AC 코드
    
    ```python
    import sys
    sys.stdin = open('temp_input/input.txt', 'r')
    
    from collections import deque
    
    def play_demons():
        dq = deque()
        for i in range(N):
            for j in range(M):
                if matrix[i][j] == 'X':
                    demons[i][j] = -1
                elif matrix[i][j] == '*':
                    dq.append((i, j, 0))
                elif matrix[i][j] == 'D':
                    demons[i][j] = 1004
    
        while dq:
            x, y, time = dq.popleft()
            if demons[x][y] != 6666:
                continue
            demons[x][y] = time
            for d in directions:
                new_x, new_y = x + d[0], y + d[1]
                if 0 <= new_x < N and 0 <= new_y < M:
                    if demons[new_x][new_y] == 6666:
                        dq.append((new_x, new_y, time+1))
    
    def game_on(a, b):
        dq = deque([(a, b, 0)])
        visited[a][b] = 1
        while dq:
            x, y, time = dq.popleft()
            if matrix[x][y] == 'X':
                continue
            if demons[x][y] <= time:
                continue
            if matrix[x][y] == 'D':
                return time
            for d in directions:
                new_x, new_y = x + d[0], y + d[1]
                if 0 <= new_x < N and 0 <= new_y < M:
                    if visited[new_x][new_y] == 0:
                        visited[new_x][new_y] = 1
                        dq.append((new_x, new_y, time+1))
    
        return float('inf')
    
    T = int(input())
    for t in range(1, T+1):
        N, M = map(int, input().split())
        matrix = []
        for i in range(N):
            cur_row = input()
            if 'S' in cur_row:
                start = i
            matrix.append(cur_row)
    
        for j in range(M):
            if matrix[start][j] == 'S':
                break
    
        visited = [[0] * M for _ in range(N)]
        directions = [(0, 1), (1, 0), (-1, 0), (0, -1)]
        demons = [[6666] * M for _ in range(N)]
        play_demons()
        ans = game_on(start, j)
    
        if ans == float('inf'):
            print(f'#{t} {"GAME OVER"}')
        else:
            print(f'#{t} {ans}')
    ```