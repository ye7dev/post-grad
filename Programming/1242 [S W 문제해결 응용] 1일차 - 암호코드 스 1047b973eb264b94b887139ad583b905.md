# 1242. [S/W 문제해결 응용] 1일차 - 암호코드 스캔

Created time: April 11, 2024 3:38 PM
Last edited time: April 11, 2024 5:27 PM

- [x]  16진수를 2진수로 바꾸는 법, 10진수로 바꾸는 법
- 문제 이해하는 게 더 어려운…솔직히 아직도 서술에 대한 1:1 대응이 안됨 문제
- AC 코드
    
    ```python
    def valid(nums):
        total = 0
        for i in range(0, len(nums)):
            if i & 1:  # actual index: even (i+1)
                total += nums[i]
            else:
                total += nums[i] * 3
        return sum(nums) if total % 10 == 0 else 0
    
    def verify_code(str_set):
        res = 0
        ans = set()
        # hexadecimal -> binary
        hex_to_bin = {}
        for i in range(10):  # 0~9
            hex_to_bin[str(i)] = bin(i)[2:].zfill(4)
        for i in range(10, 16):  # 10~15 -> alphabet
            key = hex(i)[2:].upper()
            value = bin(i)[2:].zfill(4)
            hex_to_bin[key] = value
        # number representation
        ratio_to_num = {'211':0, '221':1, '122':2, '411':3,
                        '132':4, '231':5, '114':6, '312':7,
                        '213':8, '112':9}
        for cur_str in str_set:
            bst = ''
            for char in cur_str:
                bst += hex_to_bin[char]
    
            cnts = []
            old = 0
            for i, s in enumerate(bst):
                if s != bst[old]:
                    cnts.append(i-old)
                    old = i
            #print(cnts)
    
            pwd = []
            for i in range(1, len(cnts), 4): # why start from 1?
                min_val = min(cnts[i:i+3])
                key = str(cnts[i] // min_val) + str(cnts[i+1] // min_val) + str(cnts[i+2] // min_val)
                pwd.append(ratio_to_num[key])
            #print(pwd)
    
            for i in range(0, len(pwd), 8):
                ans.add(tuple(pwd[i:i+8]))
    
        # check valid code
        for a in ans:
            res += valid(a)
        return res
    
    T = int(input())
    for t in range(1, T+1):
        N, M = map(int, input().strip().split())
        # 입력도 중복 제거해야 함 -why?
        rows = set()
        for _ in range(N):
            cur_str = input().strip()
            if cur_str.count('0') != len(cur_str):
                rows.add(cur_str)
        ans = verify_code(rows)
        print(f'#{t} {ans}')
    ```