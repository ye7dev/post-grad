# 11/18 시험 문제

Status: in progress
Theme: combat
Created time: November 20, 2023 3:28 PM
Last edited time: November 22, 2023 5:45 PM

- [ ]  코드 다시 짜보기

## Bottom-up approach

```python
def calculate_burden(arr):
    """Calculate the burden of an array."""
    n = len(arr)
    if n < 2:
        return 0
    burden = 0
    for i in range(n):
        for j in range(i+1, n):
            burden += arr[i] * arr[j]
    return burden

def find_min_overall_burden(arr, n):
    """Find the minimum overall burden for dividing arr among n people."""
    if n == 1:
        return calculate_burden(arr)
    if len(arr) == n:
        return 0

    m = len(arr)
    dp = [[float('inf')] * (n+1) for _ in range(m+1)]
    dp[0][0] = 0

    for i in range(1, m+1):
        for j in range(1, min(i, n) + 1):
            for k in range(i):
                current_burden = calculate_burden(arr[k:i])
                dp[i][j] = min(dp[i][j], dp[k][j-1] + current_burden)

    return dp[m][n]
```

m = 10, n = 5, `arr = [4, 2, 5, 2, 1, 3, 4, 1, 4, 1]`

| i | j | k | arr[k:i] | cur_burden | dp[k][j-1] | dp[i][j] |
| --- | --- | --- | --- | --- | --- | --- |
| 1 | 1 | 0 | [4] | 0 | dp[0][0] = 0 | 0 |
| 2 | 1 | 0 | [4, 2] | 8 | dp[0][0] = 0 | 0+8 = 8 |
|  |  | 1 | [2] | 0 | dp[1][0] = ∞ | ∞ > 8 |
|  | 2 | 0 | [4, 2] | 8 | dp[0][1] = ∞ | ∞ |
|  |  | 1 | [2] | 0 | dp[1][1] = 0 | 0 |
| 3 | 1 | 0 | [4, 2, 5] | 38 | dp[0][0] = 0 | 38 |
|  |  | 1 | [2, 5] | 10 | dp[1][0]= ∞ |  38 |
|  |  | 2 | [5] | 0 | dp[2][0] = ∞ | 38 |
|  | 2 | 0 | [4, 2, 5] | 38 | dp[0][1] = ∞ | ∞ |
|  |  | 1 | [2, 5] | 10 | dp[1][1] = 0 | 10 |
|  |  | 2 | [5] | 0 | dp[2][1] = 8 | 8 |
|  | 3 | 0 | [4, 2, 5] | 38 | dp[0][2] = ∞ | ∞ |
|  |  | 1 | [2, 5] | 10 | dp[1][2] = ∞ | ∞ |
|  |  | 2 | [5] | 0 | dp[2][2] = 0 | 0 |
| 4 | 1 | 0 | [4, 2, 5, 2] | 60 | dp[0][0] = 0  | 60 |
| 4 | 1 | 1 | [2, 5, 2]  | 24 | dp[1][0] = 8 | 32 |
| 4 | 1 | 2 | [5, 2] | 10 | dp[2][0] = ∞ | 32 < ∞  |
| 4 | 1 | 3 | [2] | 0 | dp[3][0] = 38 | 32 < 38 |
| 4 | 2 | 0 | [4, 2, 5, 2] | 60 | dp[0][1] = ∞ | 38 < 60 |
| 4 | 2 | 1 | [2, 5, 2]  | 24 | dp[1][1] = 0 | 24 <38 |
| 4 | 2 | 2 | [5, 2] | 10 | dp[2][1] = 8 | 18 < 24 |
| 4 | 2 | 3 | [2] | 0 | dp[3][1] = 38 | 18 < 38 |
| 4 | 3 | 0 | [4, 2, 5, 2] | 60 | dp[0][2] = ∞ | ∞ |
| 4 | 3 | 1 | [2, 5, 2]  | 24 | dp[1][2] = ∞ | ∞ |
| 4 | 3 | 2 | [5, 2] | 10 | dp[2][2] = 0 | 10 |
| 4 | 3 | 3 | [2] | 0 | dp[3][2] = 8 | 8 |
| 4 | 4 | 0 | [4, 2, 5, 2] | 60 | dp[0][3] = ∞ | ∞ |
| 4 | 4 | 1 | [2, 5, 2]  | 24 | dp[1][3] = ∞ | ∞ |
| 4 | 4 | 2 | [5, 2] | 10 | dp[2][3] = ∞ | ∞ |
| 4 | 4 | 3 | [2] | 0 | dp[3][3] = 0 | 0 |

## Top-down approach

```python
def calculate_burden(arr):
    """Calculate the burden of an array."""
    n = len(arr)
    if n < 2: # 사람이 1명이고, 일도 1개면 -> 0 
        return 0
    burden = 0
    [for i in range(n):
        for j in range(i+1, n):
            burden += arr[i] * arr[j]](11%2018%20%E1%84%89%E1%85%B5%E1%84%92%E1%85%A5%E1%86%B7%20%E1%84%86%E1%85%AE%E1%86%AB%E1%84%8C%E1%85%A6%20a407cc1253004b84949e241f61477dde.md)
    return burden

def min_burden(arr, n, dp):
    """Calculate the minimum burden for dividing arr into n subarrays."""
    if n == 1:
        return calculate_burden(arr)
    if len(arr) == n:
        return 0

    if (len(arr), n) in dp:
        return dp[(len(arr), n)]

    min_burden_value = float('inf')
    for i in range(1, len(arr) - n + 2): # arr[:i]가 []가 안되려면 i는 1부터 시작해야
        current_burden = calculate_burden(arr[:i])
        remaining_burden = min_burden(arr[i:], n - 1, dp)
        min_burden_value = min(min_burden_value, current_burden + remaining_burden)

    dp[(len(arr), n)] = min_burden_value
    return min_burden_value

def find_min_overall_burden(arr, n):
    """Find the minimum overall burden for dividing arr among n people."""
    dp = {}
    return min_burden(arr, n, dp)

# Example: [5, 4, 1, 3] and 2 people
arr = [4, 2, 5, 2, 1, 3, 4, 1, 4, 1]
#arr = [5, 4, 1, 3]
res = find_min_overall_burden(arr, 5)
print(res)
```

- 한 사람 burden 계산
    
    ```python
    for i in range(n):
      for j in range(i+1, n):
          burden += arr[i] * arr[j]
    ```
    
    예) [5, 4, 1, 3] → n = 4 ⇒ 59
    
    | i | j | arr[i] * arr[j] | burden |
    | --- | --- | --- | --- |
    | 0 | 1 | 5*4 | 20 |
    |  | 2 | 5*1 | 25 |
    |  | 3 | 5*3 | 40 |
    | 1 | 2 | 4*1 | 44 |
    |  | 3 | 4*3 | 56 |
    | 2 | 3 | 1*3 | 59 |
    | 3 | 4 |  |  |
    
- dp table update
    
    ```python
    min_burden_value = float('inf')
    for i in range(1, len(arr) - n + 2):
      current_burden = calculate_burden(arr[:i])
      remaining_burden = min_burden(arr[i:], n - 1, dp)
      min_burden_value = min(min_burden_value, current_burden + remaining_burden)
    ```
    
    예) `arr = [4, 2, 5, 2, 1, 3, 4, 1, 4, 1]` → len(arr) = 10, n = 5 → len(arr)-n+1 = 10-5+1 = 6
    
    | i | arr[:i] | cur_burden | left_burden | cur+left | min_burden |
    | --- | --- | --- | --- | --- | --- |
    | 1 | [4] | 0 | arr[1:], 5, dp |  |  |
    
    `arr = [2, 5, 2, 1, 3, 4, 1, 4, 1]`, len(arr) = 9
    
    | i | arr[:i] | cur_burden | left_burden | cur+left | min_burden |
    | --- | --- | --- | --- | --- | --- |
    | 1 | [2] | 0 | arr[1:], 4, dp |  |  |
    
    `arr = [5, 2, 1, 3, 4, 1, 4, 1]`, len(arr) = 8, n =4 → 8-4+1=5
    
    | i | arr[:i] | cur_burden | left_burden | cur+left | min_burden |
    | --- | --- | --- | --- | --- | --- |
    | 1 | [5] | 0 | arr[1:], 3, dp | 0+19 | 19 |
    | 2 | [5, 2] | 10 | arr[2:], 3, dp | 10+11 | 21 |
    | 3 | [5, 2, 1] | 17 | arr[3:], 3, dp | 17+19 | 36 |
    | 4 | [5, 2, 1, 3] |  |  |  |  |
    - `arr = [2, 1, 3, 4, 1, 4, 1]`, len(arr) = 7 → len(arr)-n+1 = 7-3+1 = 5
        
        
        | i | arr[:i] | cur_burden | left_burden | cur+left | min_burden |
        | --- | --- | --- | --- | --- | --- |
        | 1 | [2] | 0 | arr[1:], 2, dp | 0+22 | 22 |
        | 2 | [2, 1] | 2 | arr[2:], 2, dp | 2+21 | 23 |
        | 3 | [2, 1, 3] | 11 | arr[3:], 2, dp | 11+8 | 19 |
        | 4 | [2, 1, 3, 4] | 35 | arr[4:], 2, dp | 35+5 | 40 |
        | 5 | [2, 1, 3, 4, 1] | 45 | arr[5:], 2, dp | 45+0 | 45 |
    - `arr = [1, 3, 4, 1, 4, 1]`, len(arr) = 6 → len(arr)-n+1 = 6-2+1=5
        
        
        | i | arr[:i] | cur_burden | left_burden | cur+left | min_burden |
        | --- | --- | --- | --- | --- | --- |
        | 1 | [1] | 0 | arr[1:], 1, dp | 0+65 | 65 |
        | 2 | [1, 3] | 3 | arr[2:], 1, dp | 3+33 | 36 |
        | 3 | [1, 3, 4] | 19 | arr[3:], 1, dp | 19+3 | 22 |
        | 4 | [1, 3, 4, 1] | 28 | arr[4:], 1, dp | 28+4 | 32 |
        | 5 | [1, 3, 4, 1, 4] | 63 | arr[5:], 1, dp | 63+1 | 64 |
        - `arr = [3, 4, 1, 4, 1]`, len(arr) = 5
            
            → calculate_burden(`[3, 4, 1, 4, 1]`)
            
            ```python
            for i in range(n):
              for j in range(i+1, n):
                burden += arr[i] * arr[j]
            ```
            
            | i | j | arr[i] * arr[j] |
            | --- | --- | --- |
            | 0 | 1to4 | 12+3+14+3 = 32 |
            | 1 | 2to4 | 4+16+4=24 |
            | 2 | 3to4 | 4+1=5 |
            | 3 | 4 | 4 |
            
            ⇒ 65
            
        - `arr = [4, 1, 4, 1]`, len(arr) = 4
            
            → calculate_burden(`[4, 1, 4, 1]`)
            
            ```python
            for i in range(n):
              for j in range(i+1, n):
                burden += arr[i] * arr[j]
            ```
            
            | i | j | arr[i] * arr[j] |
            | --- | --- | --- |
            | 0 | 1to3 | 4+16+4=24 |
            | 1 | 2to3 | 4+1=5 |
            | 2 | 3 | 4 |
            
            ⇒ 24+5+4=33
            
        - `arr = [1, 3, 4, 1]`, len(arr) = 4
            
            → calculate_burden(`[1, 3, 4, 1]`)
            
            ```python
            for i in range(n):
              for j in range(i+1, n):
                burden += arr[i] * arr[j]
            ```
            
            | i | j | arr[i] * arr[j] |
            | --- | --- | --- |
            | 0 | 1to3 | 3+4+1=8 |
            | 1 | 2to3 | 12+4=16 |
            | 2 | 3 | 4 |
            
            ⇒ 28
            
        - `arr = [1, 3, 4, 1, 4]`, len(arr) = 5
            
            → calculate_burden(`[1, 3, 4, 1, 4]`)
            
            ```python
            for i in range(n):
              for j in range(i+1, n):
                burden += arr[i] * arr[j]
            ```
            
            | i | j | arr[i] * arr[j] |
            | --- | --- | --- |
            | 0 | 1to4 | 3+4+1+4=12 |
            | 1 | 2to4 | 12+3+12=27 |
            | 2 | 3to4 | 16+4=20 |
            | 3 | 4 | 4 |
            
            ⇒ 24+27+12 = 51+12=63
            
        
    - `arr = [3, 4, 1, 4, 1]`, len(arr) = 5 → len(arr)-n+1 = 5-2+1=4
        
        
        | i | arr[:i] | cur_burden | left_burden | cur+left | min_burden |
        | --- | --- | --- | --- | --- | --- |
        | 1 | [3] | 0 | arr[1:], 1, dp | 0+33 | 33 |
        | 2 | [3, 4] | 12 | arr[2:], 1, dp | 12+9 | 21 |
        | 3 | [3, 4, 1] | 19 | arr[3:], 1, dp | 19+4 | 23 |
        | 4 | [3, 4, 1, 4] | 51 | arr[4:], 1, dp | 51+1 | 52 |
        - `arr = [4, 1, 4, 1]` , n =1 → 33
        - `arr = [1, 4, 1]` , n =1 → 9
    - `arr = [4, 1, 4, 1]`, len(arr) = 4 → len(arr)-n+1 = 4-2+1=3
        
        
        | i | arr[:i] | cur_burden | left_burden | cur+left | min_burden |
        | --- | --- | --- | --- | --- | --- |
        | 1 | [4] | 0 | arr[1:], 1, dp | 0+9 | 9 |
        | 2 | [4, 1] | 4 | arr[2:], 1, dp | 4+4 | 8 |
        | 3 | [4, 1, 4] | 24 | arr[3:], 1, dp | 24+1 | 25 |
    - `arr = [1, 4, 1]`, len(arr) = 3 → len(arr)-n+1 = 3-2+1=2
        
        
        | i | arr[:i] | cur_burden | left_burden | cur+left | min_burden |
        | --- | --- | --- | --- | --- | --- |
        | 1 | [1] | 1 | arr[1:], 1, dp | 1+4 | 5 |
        | 2 | [1, 4] | 4 | arr[2:], 1, dp | 4+1 | 5 |
    - `arr = [1, 3, 4, 1, 4, 1]`, len(arr) = 6, n = 3 → 6-3+1 = 4
        
        
        | i | arr[:i] | cur_burden | left_burden | cur+left | min_burden |
        | --- | --- | --- | --- | --- | --- |
        | 1 | [1] | 0 | arr[1:], 2, dp | 0+21 | 21 |
        | 2 | [1, 3] | 3 | arr[2:], 2, dp | 3+8 | 11 |
        | 3 | [1, 3, 4] | 19 | arr[3:], 2, dp | 19+4 | 23 |
        | 4 | [1, 3, 4, 1] | 29 | arr[4:], 2, dp | 29+0 | 29 |
        - `arr = [3, 4, 1, 4, 1]`, len(arr) = 5, n = 2 → 5-2+1 = 4
            
            
            | i | arr[:i] | cur_burden | left_burden | cur+left | min_burden |
            | --- | --- | --- | --- | --- | --- |
            | 1 | [3] | 0 | arr[1:], 1, dp | 0+33 | 33 |
            | 2 | [3, 4] | 12 | arr[2:], 1, dp | 12+9 | 21 |
            | 3 | [3, 4, 1] | 19 | arr[3:], 1, dp | 19+4 | 23 |
            | 4 | [3, 4, 1, 4] | 51 | arr[4:], 1, dp | 51+0 | 51 |
            
        - `arr = [4, 1, 4, 1]`, len(arr) = 4, n = 2 → 4-2+1 = 3
            
            
            | i | arr[:i] | cur_burden | left_burden | cur+left | min_burden |
            | --- | --- | --- | --- | --- | --- |
            | 1 | [4] | 0 | arr[1:], 1, dp | 0+9 | 9 |
            | 2 | [4, 1] | 4 | arr[2:], 1, dp | 4+4 | 8 |
            | 3 | [4, 1, 4] | 24 | arr[3:], 1, dp | 24+0 | 24 |
        - `arr = [1, 4, 1]`, len(arr) = 3, n = 2 → 3-2+1 = 2
            
            
            | i | arr[:i] | cur_burden | left_burden | cur+left | min_burden |
            | --- | --- | --- | --- | --- | --- |
            | 1 | [1] | 0 | arr[1:], 1, dp | 0+4 | 4 |
            | 2 | [1, 4] | 4 | arr[2:], 1, dp | 4+0 | 4 |
            
    - `arr = [3, 4, 1, 4, 1]`, len(arr) = 5, n = 3 → 5-3+1 = 3
        
        
        | i | arr[:i] | cur_burden | left_burden | cur+left | min_burden |
        | --- | --- | --- | --- | --- | --- |
        | 1 | [3] | 0 | arr[1:], 2, dp | 0+33 | 33 |
        | 2 | [3, 4] | 12 | arr[2:], 2, dp | 12+9 | 21 |
        | 3 | [3, 4, 1] | 19 | arr[3:], 2, dp | 19+0 | 19 |
        - `arr = [3, 4, 1, 4, 1]`, len(arr) = 5, n = 2 → 5-2+1 = 4
            
            
            | i | arr[:i] | cur_burden | left_burden | cur+left | min_burden |
            | --- | --- | --- | --- | --- | --- |
            | 1 | [3] | 0 | arr[1:], 1, dp | 0+33 | 33 |
            | 2 | [3, 4] | 12 | arr[2:], 1, dp | 12+9 | 21 |
            | 3 | [3, 4, 1] | 19 | arr[3:], 1, dp | 19+4 | 23 |
            | 4 | [3, 4, 1, 4] | 51 | arr[4:], 1, dp | 51+0 | 51 |
            
        - `arr = [4, 1, 4, 1]`, len(arr) = 4, n = 2 → 4-2+1 = 3
            
            
            | i | arr[:i] | cur_burden | left_burden | cur+left | min_burden |
            | --- | --- | --- | --- | --- | --- |
            | 1 | [4] | 0 | arr[1:], 1, dp | 0+9 | 9 |
            | 2 | [4, 1] | 4 | arr[2:], 1, dp | 4+4 | 8 |
            | 3 | [4, 1, 4] | 24 | arr[3:], 1, dp | 24+0 | 24 |
        - `arr = [1, 4, 1]`, len(arr) = 3, n = 2 → 3-2+1 = 2
            
            
            | i | arr[:i] | cur_burden | left_burden | cur+left | min_burden |
            | --- | --- | --- | --- | --- | --- |
            | 1 | [1] | 0 | arr[1:], 1, dp | 0+4 | 4 |
            | 2 | [1, 4] | 4 | arr[2:], 1, dp | 4+0 | 4 |