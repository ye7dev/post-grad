# 1223. [S/W 문제해결 기본] 6일차 - 계산기2

Created time: May 4, 2024 9:19 AM
Last edited time: May 4, 2024 9:49 AM

- scratch
    
    “3+4+5*6+7” → 34+56*+7+
    
    exp = 3, stack = [+]
    
    exp = 34+, stack = [+]
    
    exp = 34+5, stack = [+, *]
    
    exp = 34+56*, stack = [+, +]
    
    exp = 34+56*7
    
- AC 코드
    
    ```python
    import sys
    sys.stdin = open("temp_input/input.txt", "r")
    def post_op():
        # transformation
        exp = ""
        stack = []
        for i in range(len(case)):
            if case[i] not in op_dict:
                exp += case[i]
            else:
                # priority: * > +
                if case[i] == '*':
                    while stack and stack[-1] != '+':
                        exp += stack.pop()
                else:
                    while stack:
                        exp += stack.pop()
                stack.append(case[i])
    
        # empty out stack
        while stack:
            exp += stack.pop()
    
        # calculation
        stack = []
        for j in range(len(exp)):
            if exp[j] in op_dict:
                y, x = stack.pop(), stack.pop()
                stack.append(op_dict[exp[j]](x, y))
            else:
                stack.append(int(exp[j]))
        return stack[-1]
    
    op_dict = {'+': lambda x, y: x + y,
               '-': lambda x, y: x - y,
               '*': lambda x, y: x * y,
               '/': lambda x, y: x / y}
    for t in range(1, 11):
        N = int(input())
        case = input()
        ans = post_op()
        print(f'#{t} {ans}')
    ```