# 3135. 홍준이의 사전놀이

Created time: April 24, 2024 3:41 PM
Last edited time: April 24, 2024 7:26 PM

- Trie 자료 구조 모르므로 막간 공부
- 이미 주어진 단어보다 더 긴 단어가 있는 경우, 기존 단어를 어떻게 추가하지?
    - 이번에 넣으려는 단어의 마지막 문자의 data가 None일 테니, 거기에 단어 data를 추가한다
- AC 코드
    - Lesson
        - key랑 data랑 헷갈리지 말자. data는 어떤 단어의 끝일때만 추가하는 것
    
    ```python
    class TrieNode:
        def __init__(self, key, data=None):
            self.key = key
            self.data = data
            self.children = {}
    
    class Trie:
        def __init__(self):
            self.head = TrieNode(None) # key = None (dummy head)
    
        def insert(self, string):
            cur_node = self.head
            for char in string:
                if char not in cur_node.children:
                    cur_node.children[char] = TrieNode(char)
                cur_node = cur_node.children[char]
            cur_node.data = string
            #print(cur_node.key)
    
        def search(self, string):
            cur_node = self.head
            for char in string:
                if char not in cur_node.children: # head node가 dummy라 첫번째 탐색은 children부터 
                    return False
                cur_node = cur_node.children[char]
    
            if cur_node.data is None:
                return False
            return True
    
        def starts_with(self, prefix):
            num_words = 0
            cur_node = self.head
            for p in prefix:
                if p not in cur_node.children:
                    return num_words
                cur_node = cur_node.children[p]
    
            cur_nodes = [cur_node]
            next_nodes = []
            while True:
                for node in cur_nodes:
                    if node.data is not None: # end of the word
                        num_words += 1
                    for child in node.children: # 단어가 방금 추가되어도 더 긴 단어 있을 수 있음
                        next_nodes.append(node.children[child])
    
                if len(next_nodes) != 0:
                    cur_nodes = next_nodes
                    next_nodes = []
                else:
                    break
            return num_words
    
    T = int(input())
    for t in range(1, T+1):
        notes = Trie()
        ans = []
        N = int(input())
        for _ in range(N):
            P, S = input().split()
            if P == '1':
                notes.insert(S)
            elif P == '2':
                cur_ans = notes.starts_with(S)
                ans.append(str(cur_ans))
        ans = ' '.join(ans)
        print(f'#{t} {ans}')
    ```