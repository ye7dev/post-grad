# 3234. 준환이의 양팔저울

Created time: April 8, 2024 2:40 PM
Last edited time: April 8, 2024 4:45 PM

- Trial
    - bit array : 제한시간 초과
        
        ```python
        from itertools import permutations
        
        def check_valid_case(perm):
            num_valid = 0
            n = len(perm)
            half = sum(perm) // 2
            # bit array
            for i in range(2**n):
                left, right = 0, 0
                for j in range(n):
                    if (1 << j) & i:
                        left += perm[j]
                    else:
                        right += perm[j]
                    if left < right:
                        break
                else:
                    num_valid += 1
        
            return num_valid
        
        def get_valid_cases(nums):
            num_cases = 0
            for perm in permutations(nums):
                num_cases += check_valid_case(list(perm))
            return num_cases
        
        T = int(input())
        for t in range(1, T+1):
            N = int(input())
            weights = list(map(int, input().split()))
            ans = get_valid_cases(weights)
            print(f'#{t} {ans}')
        ```
        
    - DFS: 제한시간 초과
        
        ```python
        from itertools import permutations
        
        def check_valid_case(perm):
            n = len(perm)
            def recur(idx, left, right):
                # base case
                if right > left:
                    return 0
                if idx == n:
                    return 1
        
                # current -> left
                valid_left = recur(idx+1, left+perm[idx], right)
                valid_right = recur(idx+1, left, right+perm[idx])
        
                return valid_left + valid_right
        
            return recur(0, 0, 0)
        
        def get_valid_cases(nums):
            num_cases = 0
            for perm in permutations(nums):
                num_cases += check_valid_case(list(perm))
            return num_cases
        
        T = int(input())
        for t in range(1, T+1):
            N = int(input())
            weights = list(map(int, input().split()))
            ans = get_valid_cases(weights)
            print(f'#{t} {ans}')
        ```
        
    - DFS + base case: 20/21. 마지막 문제 제한시간 초과
- AC 코드
    - 불필요한 중간 함수들 다 제거
    
    ```python
    from itertools import permutations
    
    def recur(idx, left, right):
        # base case
        if idx == n:
            return 1
        if left > half:
            # valid if putting the rest to right
            return 2 ** (n-idx)
    
        valid_left = recur(idx+1, left+perm[idx], right)
        valid_right = 0
        if left >= right + perm[idx]:
            valid_right = recur(idx+1, left, right+perm[idx])
    
        return valid_left + valid_right
    
    T = int(input())
    for t in range(1, T+1):
        N = int(input())
        weights = list(map(int, input().split()))
        num_cases = 0
        for perm in permutations(weights):
            n = len(perm)
            half = sum(perm) // 2
            num_cases += recur(0, 0, 0)
        print(f'#{t} {num_cases}')
    ```